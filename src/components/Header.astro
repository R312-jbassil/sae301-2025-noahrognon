---
import logoUrl from '../assets/logo.svg';
import soleilUrl from '../assets/soleil.svg';
import usersUrl from '../assets/users.svg';

const navLinks = [
	{ href: '/', label: 'Accueil', current: true },
	{ href: '/configurateur', label: 'Configurateur', current: false },
	{ href: '/inspiration', label: 'Inspiration IA', current: false },
	{ href: '/mes-creations', label: 'Mes créations', current: false },
	{ href: '/atelier', label: 'Atelier', current: false },
	{ href: '/mon-compte', label: 'Mon compte', current: false }
];
const user = Astro.locals.user ?? null;
---

<header class="theme-surface theme-border border-b border-[#2A2A2A] text-[#CFCAC2] transition-colors duration-300">
	<div class="mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4 md:px-10">
		<a href="/" class="flex items-center gap-3" aria-label="TaVue Accueil">
			<span class="inline-flex">
				<img src={logoUrl.src} alt="TaVue" class="h-12 w-auto" loading="lazy" />
			</span>
			<span class="sr-only">TaVue</span>
		</a>

		<nav class="hidden items-center gap-9 text-sm font-medium md:flex" aria-label="Navigation principale">
			{navLinks.map((link) => (
				<a
					href={link.href}
					aria-current={link.current ? 'page' : undefined}
					class={`relative pb-3 transition-colors duration-200 ${
						link.current ? 'text-[#E8E2D8] font-semibold' : 'text-[#5F6A73] hover:text-[#E8E2D8]'
					}`}
				>
					<span class="inline-flex items-center gap-2">
						{link.label}
						{link.href === '/inspiration' && (
							<span class="rounded-full bg-[#D1B17A]/20 px-2 py-0.5 text-[10px] font-semibold uppercase text-[#D1B17A]">
								Nouveau
							</span>
						)}
					</span>
					{link.current && (
						<span class="absolute left-0 bottom-0 h-0.5 w-full rounded-full bg-[#E0C38E]"></span>
					)}
				</a>
			))}
		</nav>

		<div class="flex items-center gap-5 text-[#D8B87C]">
			<button
				type="button"
				id="theme-toggle"
				class="rounded-full p-2 transition-transform duration-200 hover:scale-110 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#D1B17A]/70 focus-visible:ring-offset-2 focus-visible:ring-offset-[#1F1F1F]"
				aria-label="Basculer le th&egrave;me"
				data-theme-toggle
			>
				<svg
					data-theme-icon-sun
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="1.6"
					class="h-5 w-5 text-[#D1B17A]"
				>
					<path stroke-linecap="round" stroke-linejoin="round" d="M12 4.75V3m0 18v-1.75M6.364 6.364 5.25 5.25m13.5 13.5-1.114-1.114M4.75 12H3m18 0h-1.75m-2.786-5.636L18.75 5.25m-13.5 13.5 1.114-1.114" />
					<circle cx="12" cy="12" r="4" stroke-linecap="round" stroke-linejoin="round" />
				</svg>
				<svg
					data-theme-icon-moon
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="1.6"
					class="hidden h-5 w-5 text-[#F1E3C6]"
				>
					<path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.063A8.438 8.438 0 0 1 9.937 3.75c-.188 0-.375.012-.562.022a7.126 7.126 0 1 0 11.853 7.086c.014-.19.022-.38.022-.572Z" />
				</svg>
			</button>
			<a
				href={user ? '/mon-compte' : '/login'}
				class="rounded-full p-2 transition-transform duration-200 hover:scale-110 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#D1B17A]/70 focus-visible:ring-offset-2 focus-visible:ring-offset-[#1F1F1F]"
				aria-label={user ? 'Accéder à mon compte' : 'Se connecter'}
			>
				<img src={usersUrl.src} alt="" class="h-5 w-5" loading="lazy" />
			</a>
			{user ? (
				<form method="POST" action="/v2/logout" class="m-0">
					<button
						type="submit"
						class="rounded-full border border-[#2B3035] bg-[#181B1F] px-4 py-2 text-xs font-semibold text-[#D5DEE8] transition hover:border-[#D1B17A]"
					>
						D&eacute;connexion
					</button>
				</form>
			) : (
				<a
					href="/signup"
					class="rounded-full border border-[#2B3035] bg-[#181B1F] px-4 py-2 text-xs font-semibold text-[#D5DEE8] transition hover:border-[#D1B17A]"
				>
					Inscription
				</a>
			)}
		</div>
	</div>
</header>
